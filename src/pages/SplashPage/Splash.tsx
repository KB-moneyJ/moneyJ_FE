import React, { useEffect, useState } from "react";
import { motion, useAnimation } from "framer-motion";
import { useNavigate } from "react-router-dom"; // <- import

const Splash = () => {
  const containerWidth = 402;
  const containerHeight = 874;

  const svgControls = useAnimation();
  const leftEyeControls = useAnimation();
  const [showMoney, setShowMoney] = useState(true); // money 표시 여부
  const navigate = useNavigate(); // <- hook

  useEffect(() => {
    const runAnimation = async () => {
      // 왼쪽 눈 애니메이션
      const eyePromise = leftEyeControls.start({
        scale: [12, 1],
        originX: 0.5,
        originY: 0.5,
        transition: { duration: 3, ease: "easeInOut" },
      });

      // money 사라지게
      const moneyPromise = new Promise((resolve) => {
        setTimeout(() => {
          setShowMoney(false);
          resolve(true);
        }, 1700);
      });

      // svg width 줄이기
      // svg width 줄이기
      const svgPromise = new Promise((resolve) => {
        setTimeout(() => {
          svgControls.start({
            width: 150,
            transition: { duration: 0.8, ease: "easeInOut" },
          }).then(async () => {
            // width 애니메이션 끝나고 1초 대기
            await new Promise((r) => setTimeout(r, 1000));
            resolve(true);
          });
        }, 1900);
      });


      // 모든 애니메이션 기다리기
      await Promise.all([eyePromise, moneyPromise, svgPromise]);

      // 이동
      navigate("/login");
    };

    runAnimation();
  }, [leftEyeControls, svgControls, navigate]);


  return (
    <div
      style={{
        position: "relative",
        width: `${containerWidth}px`,
        height: `${containerHeight}px`,
        overflow: "hidden",
        backgroundColor: "transparent",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
      }}
    >
      {showMoney && (
        <motion.div
          initial={{ opacity: 1 }}
          animate={{ opacity: 1 }} // 그대로 유지
          exit={{ opacity: 0 }}   // 사라질 때만
          transition={{ opacity: { duration: 0.8, ease: "easeOut" } }}
          style={{
            position: "absolute",
            zIndex: 10,
            fontSize: "70px",
            fontWeight: "bold",
            color: "#6312AC",
          }}
        >
          money
        </motion.div>
      )}



      <motion.svg
        animate={svgControls}
        initial={{ width: containerWidth }}
        height="874px"
        viewBox="0 0 99 152"
        preserveAspectRatio="xMidYMid meet"
        xmlns="http://www.w3.org/2000/svg"
        style={{
          display: "block",
          margin: "0 auto",
        }}
      >
        {/* === 오른쪽 눈 === */}
        <motion.path
          d="M80.0935 42.3472C80.1893 42.4246 80.2851 42.502 80.3838 42.5817C83.2417 45.018 84.8889 48.9484 85.2234 52.6424C85.4797 57.0389 84.4219 61.0456 81.6654 64.528C81.6009 64.6103 81.5363 64.6926 81.4698 64.7774C80.9369 65.4229 80.305 65.9327 79.6443 66.4421C79.5128 66.5448 79.5128 66.5448 79.3785 66.6497C78.1081 67.5933 76.6898 68.2242 75.153 68.5813C75.0575 68.6066 74.962 68.6318 74.8635 68.6578C72.1073 69.2923 69.2091 68.5742 66.8441 67.1176C63.429 64.7839 61.4177 61.2495 60.6132 57.2213C60.5944 57.106 60.5756 56.9906 60.5562 56.8717C60.5357 56.7457 60.5151 56.6197 60.4939 56.4899C60.2607 54.5262 60.2654 52.2521 60.7808 50.3413C60.8142 50.2104 60.8142 50.2104 60.8484 50.0768C61.5478 47.3803 62.7682 45.1262 64.7107 43.1354C64.7975 43.0427 64.8844 42.9499 64.9738 42.8544C69.0671 38.5692 75.6605 38.7409 80.0935 42.3472Z"
          fill="#FED84A"
        />

        {/* === J 모양 === */}
        <path
          d="M94.4656 3.72813C96.9719 6.00213 98.6709 9.34998 98.957 12.7355C98.9733 13.2505 98.9724 13.7651 98.9717 14.2803C98.9719 14.4379 98.9721 14.5955 98.9724 14.7532C98.973 15.1867 98.973 15.6202 98.9728 16.0537C98.9727 16.5253 98.9733 16.9969 98.9737 17.4684C98.9746 18.4039 98.9748 19.3394 98.9749 20.2749C98.975 21.3955 98.9757 22.516 98.9765 23.6366C98.9783 26.3456 98.979 29.0547 98.9795 31.7637C98.9798 33.046 98.9802 34.3284 98.9806 35.6107C98.982 40.0025 98.9832 44.3943 98.9836 48.7861C98.9837 49.0618 98.9837 49.3376 98.9837 49.6133C98.9837 49.8897 98.9838 50.166 98.9838 50.4424C98.9838 50.9969 98.9839 51.5513 98.9839 52.1057C98.9839 52.2432 98.984 52.3807 98.984 52.5223C98.9844 56.9753 98.9862 61.4284 98.9888 65.8814C98.9915 70.592 98.9931 75.3026 98.9932 80.0133C98.9932 80.5311 98.9933 81.0488 98.9933 81.5666C98.9933 81.6941 98.9933 81.8216 98.9933 81.953C98.9934 83.9996 98.9947 86.0462 98.9963 88.0928C98.9979 90.153 98.9983 92.2131 98.9974 94.2732C98.9969 95.495 98.9973 96.7167 98.9991 97.9385C99.0002 98.7574 99 99.5762 98.9989 100.395C98.9983 100.86 98.9982 101.325 98.9997 101.789C99.0082 104.751 98.8556 107.681 98.3113 110.6C98.297 110.678 98.2828 110.756 98.268 110.837C97.4214 115.457 95.9838 120.03 93.799 124.198C93.6664 124.453 93.5377 124.71 93.409 124.967C91.4248 128.896 88.8045 132.458 85.8106 135.671C85.5977 135.9 85.3874 136.13 85.1799 136.364C84.7032 136.9 84.2256 137.401 83.6773 137.863C83.4503 138.061 83.243 138.271 83.0338 138.487C82.5974 138.932 82.1255 139.319 81.6404 139.708C81.3457 139.951 81.067 140.204 80.7882 140.465C80.181 141.018 79.5226 141.485 78.85 141.953C78.6289 142.108 78.4101 142.266 78.1916 142.425C70.982 147.646 62.3386 150.744 53.4823 151.45C53.3351 151.462 53.1879 151.475 53.0362 151.488C42.717 152.273 32.3092 149.615 23.3133 144.103C23.1939 144.03 23.0746 143.957 22.9517 143.881C22.1731 143.398 21.4293 142.879 20.6957 142.33C20.5768 142.242 20.458 142.154 20.3356 142.064C19.1684 141.188 18.0032 140.312 16.9315 139.32C16.6999 139.107 16.4654 138.899 16.2285 138.693C15.7607 138.283 15.3036 137.864 14.8499 137.439C14.7749 137.369 14.6998 137.3 14.6225 137.228C14.1735 136.808 13.7597 136.371 13.36 135.904C13.13 135.637 12.8894 135.382 12.6474 135.127C11.9218 134.36 11.2587 133.562 10.6209 132.721C10.4878 132.547 10.3514 132.376 10.2147 132.205C8.84491 130.476 7.64121 128.594 6.54798 126.679C6.4844 126.57 6.4844 126.57 6.41953 126.458C2.91525 120.397 0.851436 113.594 0.147849 106.638C0.137102 106.535 0.126355 106.431 0.115282 106.325C0.0131631 105.202 0.0107562 104.077 0.00859123 102.95C0.00750063 102.607 0.00400623 102.265 0.000477026 101.923C-0.00836301 100.304 0.101571 98.7679 0.674176 97.2363C0.702798 97.158 0.73142 97.0797 0.76091 96.9991C2.09267 93.4655 4.70262 90.4563 8.16164 88.8865C11.9436 87.2414 15.9245 87.2151 19.7575 88.6652C21.0553 89.1932 22.2009 89.9015 23.2755 90.8C23.5141 91.0031 23.5141 91.0031 23.8396 91.2126C23.8396 91.2869 23.8396 91.3612 23.8396 91.4378C23.903 91.464 23.9664 91.4903 24.0317 91.5174C26.1081 92.6935 27.4199 96.0071 28.0397 98.1748C28.4284 99.5968 28.4923 101.024 28.5688 102.488C28.6751 104.508 28.9504 106.397 29.566 108.327C29.5932 108.412 29.6204 108.497 29.6484 108.585C30.9842 112.677 33.6859 116.42 37.2013 118.91C37.2668 118.957 37.3323 119.004 37.3998 119.053C38.3797 119.75 39.389 120.326 40.4761 120.838C40.6598 120.926 40.8407 121.02 41.0211 121.115C45.5859 123.438 51.3994 123.357 56.1771 121.838C61.0024 120.194 65.134 116.829 67.6275 112.36C67.7419 112.156 67.8589 111.952 67.976 111.749C69.115 109.734 69.8334 107.444 70.1844 105.16C70.1974 105.076 70.2104 104.991 70.2238 104.904C70.4878 103.011 70.4559 101.098 70.4596 99.1914C70.4605 98.7796 70.462 98.3678 70.4635 97.956C70.4659 97.2445 70.468 96.533 70.4697 95.8215C70.4723 94.7929 70.4754 93.7642 70.4787 92.7356C70.4841 91.0662 70.4889 89.3968 70.4935 87.7274C70.4979 86.1069 70.5026 84.4864 70.5075 82.8658C70.508 82.7157 70.508 82.7157 70.5085 82.5625C70.51 82.0604 70.5115 81.5582 70.5131 81.0561C70.5259 76.8979 70.5379 72.7397 70.5493 68.5815C70.6188 68.5894 70.6883 68.5973 70.7599 68.6054C70.8511 68.6157 70.9422 68.6259 71.036 68.6365C71.1264 68.6467 71.2167 68.657 71.3098 68.6675C74.428 68.9988 77.3468 68.15 79.8057 66.1959C79.9767 66.0531 80.1475 65.9101 80.318 65.7666C80.4314 65.6807 80.5449 65.5948 80.6618 65.5063C83.4622 62.9372 84.964 58.9165 85.1461 55.1829C85.2926 51.0256 84.1438 47.1966 81.5531 43.9237C81.4563 43.8002 81.4563 43.8002 81.3575 43.6743C79.7324 41.7056 77.1991 40.3066 74.7038 39.8703C74.5626 39.8448 74.4213 39.8193 74.2757 39.7929C73.2735 39.689 72.2496 39.7356 71.2477 39.815C71.1168 39.8253 70.9858 39.8356 70.8509 39.8462C70.7514 39.8542 70.6519 39.8622 70.5493 39.8703C70.5299 36.5628 70.5116 33.2552 70.495 29.9476C70.493 29.5562 70.491 29.1647 70.489 28.7733C70.4884 28.6564 70.4884 28.6564 70.4878 28.5371C70.4814 27.2793 70.4742 26.0214 70.4667 24.7636C70.459 23.4707 70.4522 22.1777 70.4461 20.8848C70.4427 20.1595 70.4389 19.4343 70.4341 18.709C70.4296 18.025 70.4262 17.3409 70.4236 16.6569C70.4225 16.4071 70.4209 16.1574 70.419 15.9077C70.3836 11.3257 71.4465 7.36576 74.7108 4.00257C80.1236 -1.36937 88.8682 -1.20722 94.4656 3.72813Z"
          fill="url(#paint0_linear_0_1)"
        />

        {/* === 왼쪽 눈 === */}
        <motion.path
          d="M36.9752 42.4068C40.1904 45.2247 41.7145 49.1827 42.0293 53.3815C42.2847 57.6044 40.8721 61.7665 38.0952 64.9435C36.2476 67.009 33.5177 68.6536 30.701 68.8266C27.0158 68.9019 24.3216 68.0415 21.5516 65.5243C18.6841 62.7637 17.2087 58.7234 17.07 54.7933C16.979 50.2629 18.4198 46.2054 21.5587 42.9033C25.887 38.6834 32.3947 38.5221 36.9752 42.4068Z"
          fill="#FFD849"
          animate={leftEyeControls}
        />
        <defs>
          <linearGradient
            id="paint0_linear_0_1"
            x1="92.5412"
            y1="-2.44766e-06"
            x2="26"
            y2="143"
            gradientUnits="userSpaceOnUse"
          >
            <stop stopColor="#7068F4" />
            <stop offset="0.461538" stopColor="#F065BB" />
            <stop offset="1" stopColor="#FFB76A" />
          </linearGradient>
        </defs>
      </motion.svg>
    </div>
  );
};

export default Splash;
